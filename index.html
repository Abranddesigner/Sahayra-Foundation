import React, { useEffect, useState } from "react";

// Sahayra Foundation — Single file React app (Tailwind-friendly)
// This file exports a default App component. It is intentionally self-contained
// and avoids passing raw objects into JSX so the React "invalid element type (object)"
// error does not occur.

const routes = [
  { path: "/", label: "Home" },
  { path: "/about", label: "About" },
  { path: "/donate", label: "Donate" },
  { path: "/impact", label: "Impact" },
  { path: "/contact", label: "Contact" },
];

const Section = ({ id, children, className = "" }) => (
  <section id={id} className={`max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 ${className}`}>
    {children}
  </section>
);

const Card = ({ title, children }) => (
  <div className="rounded-2xl shadow-sm p-6 bg-white border border-gray-100">
    <h3 className="text-lg font-semibold mb-2">{title}</h3>
    <div className="text-sm text-gray-700">{children}</div>
  </div>
);

function Navbar({ current, navigate }) {
  const [open, setOpen] = useState(false);
  return (
    <header className="sticky top-0 z-50 backdrop-blur bg-white/90 border-b">
      <nav className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
        <a
          href="#/"
          onClick={(e) => {
            e.preventDefault();
            navigate("/");
          }}
          className="flex items-center gap-3"
        >
          <div className="w-10 h-10 rounded-lg bg-emerald-600 flex items-center justify-center text-white font-bold">S</div>
          <div className="leading-5">
            <div className="font-bold tracking-tight">Sahayra Foundation</div>
            <div className="text-xs text-gray-500 -mt-0.5">From Compassion to Care</div>
          </div>
        </a>

        <button className="sm:hidden p-2 border rounded-lg" onClick={() => setOpen((v) => !v)} aria-label="Toggle menu">
          ☰
        </button>

        <ul className={`sm:flex gap-2 items-center ${open ? "block" : "hidden sm:flex"}`}>
          {routes.map((r) => (
            <li key={r.path}>
              <a
                href={`#${r.path}`}
                onClick={(e) => {
                  e.preventDefault();
                  navigate(r.path);
                  setOpen(false);
                }}
                className={`px-3 py-2 rounded-lg text-sm hover:bg-gray-100 ${current === r.path ? "bg-gray-900 text-white" : "text-gray-700"}`}
              >
                {r.label}
              </a>
            </li>
          ))}

          <li>
            <button
              onClick={() => navigate("/donate")}
              className="ml-2 inline-flex items-center gap-2 px-4 py-2 rounded-2xl text-sm bg-emerald-600 text-white shadow-sm"
            >
              Donate Now
            </button>
          </li>
        </ul>
      </nav>
    </header>
  );
}

function Home() {
  const tiers = [
    { label: "$10 (₹500)", desc: "Provides a day’s meal for one family" },
    { label: "$30 (₹1,500)", desc: "Supplies clean water & medical aid for three days" },
    { label: "$60 (₹5,000)", desc: "Supports a family with emergency shelter & relief material" },
  ];

  return (
    <>
      <div
        role="img"
        aria-label="Flood relief hero"
        className="relative bg-cover bg-center"
        style={{
          backgroundImage:
            "url('https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=1600&auto=format&fit=crop')",
        }}
      >
        <div className="bg-black/50">
          <Section className="text-white py-20 sm:py-28">
            <div className="max-w-3xl">
              <h1 className="text-4xl sm:text-5xl font-bold leading-tight">Together, We Can Rebuild Lives in Punjab</h1>
              <p className="mt-4 text-lg text-gray-100">
                Thousands of families in Punjab are struggling after devastating floods swept away their homes,
                food, and safety. Your support can bring them hope and survival.
              </p>

              <div className="mt-6 flex gap-3">
                <a href="#/donate" className="px-5 py-3 rounded-2xl bg-emerald-600 text-white font-semibold shadow" onClick={(e)=>{e.preventDefault(); window.location.hash='/donate';}}>
                  Donate Now
                </a>
                <a href="#/contact" className="px-5 py-3 rounded-2xl border border-white/60 text-white" onClick={(e)=>{e.preventDefault(); window.location.hash='/contact';}}>
                  Volunteer
                </a>
              </div>

              <div className="mt-6 grid grid-cols-1 sm:grid-cols-3 gap-3">
                {['Food Distribution','Medical Assistance','Temporary Shelters'].map((t, i) => (
                  <div key={i} className="bg-white/10 rounded-xl p-3">
                    <div className="font-semibold">{t}</div>
                  </div>
                ))}
              </div>
            </div>
          </Section>
        </div>
      </div>

      <Section className="py-12">
        <h2 className="text-2xl font-bold">How You Can Make an Impact</h2>
        <p className="mt-2 text-gray-700 max-w-2xl">Your contribution, no matter the size, makes a real difference.</p>

        <div className="mt-6 grid sm:grid-cols-3 gap-4">
          {tiers.map((t, idx) => (
            <Card key={idx} title={t.label}>
              {t.desc}
            </Card>
          ))}
        </div>

        <div className="mt-8">
          <a href="#/donate" className="px-6 py-3 rounded-2xl bg-emerald-600 text-white font-semibold shadow" onClick={(e)=>{e.preventDefault(); window.location.hash='/donate';}}>
            Donate Now
          </a>
        </div>
      </Section>

      <Section className="py-8">
        <div className="grid sm:grid-cols-3 gap-4">
          <div className="rounded-2xl p-5 bg-gray-50">
            <h4 className="font-semibold">Transparency & Trust</h4>
            <p className="text-sm text-gray-600 mt-2">We ensure every donation is used responsibly. Regular updates and reports are shared with donors.</p>
          </div>

          <div className="rounded-2xl p-5 bg-gray-50">
            <h4 className="font-semibold">Where Funds Go</h4>
            <p className="text-sm text-gray-600 mt-2">Food kits, medical aid, clean water, temporary shelters, and rehabilitation.</p>
          </div>

          <div className="rounded-2xl p-5 bg-gray-50">
            <h4 className="font-semibold">Stay Updated</h4>
            <p className="text-sm text-gray-600 mt-2">Subscribe to receive impact reports and stories from the field on our Impact page.</p>
          </div>
        </div>
      </Section>
    </>
  );
}

function About() {
  return (
    <Section className="py-14">
      <div className="grid lg:grid-cols-2 gap-10 items-start">
        <div>
          <h2 className="text-3xl font-bold">Who We Are</h2>
          <p className="mt-4 text-gray-700 leading-7">
            Sahayra Foundation – "From Compassion to Care" – is a humanitarian organization driven by the
            belief that every life matters, especially in times of crisis. Our mission is to extend a helping hand
            to those facing the toughest days of their lives.
          </p>

          <h3 className="mt-6 font-semibold">Our Mission</h3>
          <p className="text-gray-700 mt-2">To provide swift relief, restore dignity, and rebuild hope for disaster-affected communities through sustainable and impactful humanitarian initiatives.</p>

          <h3 className="mt-6 font-semibold">Our Core Values</h3>
          <ul className="mt-2 list-disc pl-5 text-gray-700">
            <li>Humanity First</li>
            <li>Transparency</li>
            <li>Collaboration</li>
          </ul>
        </div>

        <div>
          <img
            src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1600&auto=format&fit=crop"
            alt="Volunteers"
            className="rounded-3xl shadow-md w-full object-cover"
          />
          <p className="text-xs text-gray-500 mt-2">A real photo of volunteers in the field builds trust—replace with your own image.</p>
        </div>
      </div>
    </Section>
  );
}

function Donate() {
  const presets = [500, 1500, 5000];
  const [amount, setAmount] = useState(presets[0]);

  // Replace these with your real payment links/UPI
  const upiId = "yourupi@upi";
  const paymentLink = "https://example.com/donate";

  return (
    <Section className="py-14">
      <div className="grid lg:grid-cols-2 gap-10 items-start">
        <div>
          <h2 className="text-3xl font-bold">Your Donation Can Save Lives</h2>
          <p className="mt-3 text-gray-700">The recent floods have left countless people without food, clean water, or shelter. By donating today, you are giving them a chance to recover and rebuild.</p>

          <div className="mt-6 flex gap-2 flex-wrap">
            {presets.map((p) => (
              <button key={p} onClick={() => setAmount(p)} className={`px-4 py-2 rounded-2xl border ${amount === p ? "bg-gray-900 text-white" : ""}`}>
                ₹{p.toLocaleString()}
              </button>
            ))}
          </div>

          <div className="mt-4 flex items-center gap-3">
            <label className="text-sm">Custom Amount</label>
            <input type="number" value={amount} onChange={(e) => setAmount(Number(e.target.value || 0))} className="px-3 py-2 rounded-lg border w-48" min={1} />
          </div>

          <div className="mt-6 flex gap-3 flex-wrap">
            <a href={paymentLink} target="_blank" rel="noreferrer" className="px-5 py-3 rounded-2xl bg-emerald-600 text-white">Pay Now</a>
            <a href={`upi://pay?pa=${encodeURIComponent(upiId)}&pn=Sahayra%20Foundation&am=${amount}&cu=INR`} className="px-5 py-3 rounded-2xl border">Pay via UPI</a>
          </div>

          <div className="mt-6 text-sm text-gray-600">We accept Online Payment Gateway, Direct Bank Transfer, and CSR donations. Every donation is recorded and used for relief & rehabilitation.</div>
        </div>

        <div className="rounded-2xl border p-6 bg-gray-50">
          <h3 className="font-semibold">What Your Support Provides</h3>
          <ul className="mt-3 text-gray-700 list-disc pl-5">
            <li>Emergency food kits for displaced families</li>
            <li>Medical and hygiene supplies</li>
            <li>Temporary housing units</li>
            <li>Rehabilitation & livelihood support</li>
          </ul>

          <div className="mt-6 text-sm text-gray-500">Accountability Promise: All contributions are documented, audited, and used only for relief efforts. Regular impact reports and photographs are shared with donors.</div>
        </div>
      </div>
    </Section>
  );
}

function Impact() {
  const stats = [
    { k: "Meals Distributed", v: "10,000+" },
    { k: "Medical Camps", v: "5 Districts" },
    { k: "Water Tanks Installed", v: "Many" },
  ];

  return (
    <Section className="py-14">
      <h2 className="text-3xl font-bold">Impact & Updates</h2>
      <p className="mt-3 text-gray-700">Follow our progress as we work to rebuild Punjab, one family at a time.</p>

      <div className="mt-6 grid sm:grid-cols-3 gap-4">
        {stats.map((s, i) => (
          <div key={i} className="rounded-2xl border p-5 bg-gray-50 text-center">
            <div className="text-2xl font-bold">{s.v}</div>
            <div className="text-xs text-gray-500 mt-1">{s.k}</div>
          </div>
        ))}
      </div>

      <div className="mt-8">
        <h3 className="font-semibold">Voices From The Ground</h3>
        <blockquote className="mt-3 italic text-gray-700">“Thanks to the donors, we have food and shelter for our children. This support has given us a reason to believe again.” – A Punjab flood survivor</blockquote>

        <div className="mt-6">
          <a href="#/contact" onClick={(e)=>{e.preventDefault(); window.location.hash='/contact';}} className="px-5 py-3 rounded-2xl bg-emerald-600 text-white">Subscribe for Updates</a>
        </div>
      </div>
    </Section>
  );
}

function Contact() {
  return (
    <Section className="py-14">
      <div className="grid lg:grid-cols-2 gap-10">
        <div>
          <h2 className="text-3xl font-bold">Contact Us</h2>
          <p className="mt-3 text-gray-700">We welcome volunteers, donors, and partners. Drop us a line and we will respond promptly.</p>

          <form onSubmit={(e)=>{e.preventDefault(); alert('Thanks! We will reach out soon.');}} className="mt-6 space-y-4">
            <input className="w-full px-4 py-3 rounded-lg border" placeholder="Full Name" required />
            <input type="email" className="w-full px-4 py-3 rounded-lg border" placeholder="Email" required />
            <input className="w-full px-4 py-3 rounded-lg border" placeholder="Phone" />
            <textarea className="w-full px-4 py-3 rounded-lg border h-32" placeholder="Message" />
            <button className="px-5 py-3 rounded-2xl bg-gray-900 text-white">Send Message</button>
          </form>

          <div className="mt-6 text-sm text-gray-600">
            <div>📍 Office: Add your address here</div>
            <div>✉️ Email: hello@sahayra.org</div>
            <div>☎️ Phone: +91-XXXXXXXXXX</div>
          </div>
        </div>

        <div className="rounded-2xl overflow-hidden border">
          <img src="https://images.unsplash.com/photo-1460602594182-8568137446ce?q=80&w=1600&auto=format&fit=crop" alt="Map" className="w-full h-full object-cover" />
        </div>
      </div>
    </Section>
  );
}

function Footer() {
  return (
    <footer className="border-t bg-white">
      <Section className="py-8">
        <div className="grid sm:grid-cols-3 gap-6 text-sm">
          <div>
            <div className="font-semibold">Sahayra Foundation</div>
            <p className="text-gray-600 mt-2">Registered NGO • PAN & 80G details (replace with real info)</p>
          </div>

          <div>
            <div className="font-semibold">Quick Links</div>
            <ul className="mt-2 space-y-2">
              <li><a href="#/about" className="hover:underline">About</a></li>
              <li><a href="#/donate" className="hover:underline">Donate</a></li>
              <li><a href="#/impact" className="hover:underline">Impact</a></li>
              <li><a href="#/contact" className="hover:underline">Contact</a></li>
            </ul>
          </div>

          <div>
            <div className="font-semibold">Transparency</div>
            <p className="text-gray-600 mt-2">Annual reports, financials and impact statements posted regularly.</p>
          </div>
        </div>

        <div className="text-xs text-gray-500 mt-6">© {new Date().getFullYear()} Sahayra Foundation. All rights reserved.</div>
      </Section>
    </footer>
  );
}

export default function App() {
  const [route, setRoute] = useState(window.location.hash.replace(/^#/, "") || "/");

  useEffect(() => {
    const onHash = () => setRoute(window.location.hash.replace(/^#/, "") || "/");
    window.addEventListener("hashchange", onHash);
    return () => window.removeEventListener("hashchange", onHash);
  }, []);

  const navigate = (path) => {
    window.location.hash = path;
    setRoute(path);
    window.scrollTo({ top: 0, behavior: "smooth" });
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white text-gray-900">
      <Navbar current={route} navigate={navigate} />

      {route === "/" && <Home />}
      {route === "/about" && <About />}
      {route === "/donate" && <Donate />}
      {route === "/impact" && <Impact />}
      {route === "/contact" && <Contact />}

      <Footer />

      {/* Sticky Donate Button */}
      <button
        onClick={() => (window.location.hash = "/donate")}
        aria-label="Donate"
        className="fixed bottom-6 right-6 z-50 px-4 py-3 rounded-full shadow-lg bg-emerald-600 text-white"
      >
        Donate
      </button>
    </div>
  );
}
